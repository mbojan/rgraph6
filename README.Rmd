---
output: github_document
editor_options: 
  chunk_output_type: console
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
library(rgraph6)
stopifnot(requireNamespace("igraph", quietly = TRUE))


knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# `rgraph6`: Representing Graphs as graph6, dgraph6 or sparse6 Strings

<!-- badges: start -->
[![R-CMD-check](https://github.com/mbojan/rgraph6/workflows/R-CMD-check/badge.svg)](https://github.com/mbojan/rgraph6/actions)
[![rstudio mirror downloads](http://cranlogs.r-pkg.org/badges/rgraph6?color=2ED968)](http://cranlogs.r-pkg.org/) 
[![cran version](http://www.r-pkg.org/badges/version/rgraph6)](https://cran.r-project.org/package=rgraph6)
<!-- badges: end -->


Functions in this package allow for converting network data (undirected graphs of size up to 128 nodes) to compact graph6 symbols and back. Graph6 symbols are convenient in a number of contexts, especially when working with large number of graphs.



## What are graph6, sparse6 and dgraph6 formats?

Graph6 is a compact format for representing undirected graphs as strings of printable ASCII characters due to [Brendan McKay](https://en.wikipedia.org/wiki/Brendan_McKay). See [here](http://users.cecs.anu.edu.au/~bdm/data/formats.txt) for format specification.





## Installation

<!--
Install released version from CRAN with:

```{r install-cran, eval=FALSE}
install.packages("rgraph6")
```
-->

Install development version from GutHub with:

```{r install-gh, eval=FALSE}
# install.packages("remotes")
remotes::install_github("mbojan/rgraph6", build_vignettes=TRUE)
```



## Usage

Top level functions are

- `adjacency_from_text()`
- `edgelist_from_text()`
- `igraph_from_text()`
- `network_from_text()`

which try to guess the format used. For example:

```{r example-mixed}
# Create a vector with a mixture of graph6, dgraph6 and sparse6 symbols
x <- c(g6[1], s6[2], d6[3])
igraph_from_text(x)
network_from_text(x)
```




### Tidy graph databases

The formats shine if we need to store large number of graphs in a data frame. Let's generate a list of random graphs as igraph objects and store them in a data frame column of graph6 symbols:

```{r}
library("dplyr")

# Generate list of igraph objects
set.seed(666)

d <- tibble::tibble(
  g6 = replicate(
    10,
    igraph::random.graph.game(sample(3:12, replace=TRUE), p=.5, directed=FALSE),
    simplify=FALSE
  ) %>%
    as_graph6()
)
d
```

Nice and compact. We can go further by doing some computations and saving the results together with the graph data, and even save it to a simple CSV file!

```{r}
d %>%
  dplyr::mutate(
    igraphs = igraph_from_text(g6),
    vc = purrr::map_dbl(igraphs, igraph::vcount),
    ec = purrr::map_dbl(igraphs, igraph::ecount),
    density = purrr::map_dbl(igraphs, igraph::edge_density)
  ) %>%
  dplyr::select(-igraphs) %>%
  write.csv(row.names = FALSE)
```

